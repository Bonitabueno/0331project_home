<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>3D Sim Character Example</title>
  <style>
    body { margin:0; background: #181825;}
    #info { color:#fff; position:fixed; left:12px; top:16px; z-index:10; font-family:sans-serif;}
  </style>
</head>
<body>
<div id="info">←↑↓→ 방향키로 캐릭터를 움직여 보세요</div>
<script src="https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.153.0/examples/js/loaders/GLTFLoader.js"></script>
<script>
  let scene = new THREE.Scene();
  let camera = new THREE.PerspectiveCamera(50, window.innerWidth/window.innerHeight, 0.1, 1000);
  let renderer = new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  // 빛
  let light = new THREE.HemisphereLight(0xffffff, 0x444444, 1.2);
  scene.add(light);

  // 땅
  let ground = new THREE.Mesh(
    new THREE.PlaneGeometry(20, 20),
    new THREE.MeshPhongMaterial({color:0x444444})
  );
  ground.rotation.x = -Math.PI/2;
  scene.add(ground);

  // 3D 캐릭터(예시: 공개 glTF 모델, 인터넷 필요)
  let sim, simMixer;
  let loader = new THREE.GLTFLoader();
  loader.load('https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/AnimatedCube/glTF/AnimatedCube.gltf',
    function(gltf) {
      sim = gltf.scene;
      sim.scale.set(1.5, 1.5, 1.5);
      sim.position.set(0, 0.75, 0);
      scene.add(sim);
      animate();
    }
  );

  camera.position.set(0, 4, 8);
  camera.lookAt(0, 1, 0);

  // 이동 처리
  let simPos = {x:0, z:0};
  document.addEventListener('keydown', function(e){
    if(!sim) return;
    let speed = 0.2;
    if(e.key==='ArrowUp') simPos.z -= speed;
    if(e.key==='ArrowDown') simPos.z += speed;
    if(e.key==='ArrowLeft') simPos.x -= speed;
    if(e.key==='ArrowRight') simPos.x += speed;
    sim.position.set(simPos.x, 0.75, simPos.z);
  });

  function animate(){
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
  }
</script>
</body>
</html>
