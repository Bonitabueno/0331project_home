<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì‹¬ì¦ˆ ë¯¸ë‹ˆ ì›¹ê²Œì„</title>
  <style>
    body {
      background: #181825;
      color: #fff;
      font-family: 'Pretendard', sans-serif;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #gameArea {
      position: relative;
      width: 480px;
      height: 320px;
      background: #263238;
      border-radius: 16px;
      margin-top: 32px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.3);
      overflow: hidden;
    }
    .sim {
      position: absolute;
      width: 48px;
      height: 48px;
      background: #FFD600;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.2rem;
      border: 3px solid #fff;
      transition: left 0.1s, top 0.1s;
      user-select: none;
    }
    .object {
      position: absolute;
      width: 40px;
      height: 40px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: #fff;
      cursor: pointer;
      user-select: none;
      background: #37474F;
      border: 2px solid #FFD600;
    }
    #uiPanel {
      width: 480px;
      margin-top: 16px;
      background: #23232f;
      border-radius: 10px;
      padding: 14px 22px;
      display: flex;
      gap: 24px;
      justify-content: space-between;
      align-items: center;
      font-size: 1.1rem;
    }
    .bar {
      width: 90px;
      height: 12px;
      background: #444;
      border-radius: 6px;
      margin-left: 6px;
      overflow: hidden;
      display: inline-block;
      vertical-align: middle;
    }
    .bar-inner {
      height: 100%;
      transition: width .3s;
    }
    .happy { background: #FFD600; }
    .hunger { background: #FF6F00; }
    .energy { background: #64DD17; }
    #gameover {
      color: #FF5252;
      font-weight: bold;
      margin: 18px 0 0 0;
    }
    #createPanel {
      margin-top: 48px;
      background: #23232f;
      border-radius: 14px;
      padding: 30px 40px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.18);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 18px;
    }
    #createPanel input {
      padding: 7px 12px;
      border-radius: 8px;
      border: none;
      font-size: 1.1rem;
      margin-right: 8px;
    }
    #createPanel button {
      background: #FFD600;
      border: none;
      border-radius: 8px;
      color: #222;
      padding: 8px 24px;
      font-size: 1rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="createPanel">
    <h2>ìºë¦­í„° ìƒì„±</h2>
    <input type="text" id="simName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="8"/>
    <button onclick="createSim()">ì‹œì‘í•˜ê¸°</button>
  </div>
  <div id="gameArea" style="display:none;">
    <!-- ìºë¦­í„°, ì˜¤ë¸Œì íŠ¸ê°€ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
  </div>
  <div id="uiPanel" style="display:none;">
    <span id="simLabel"></span>
    <span>í–‰ë³µ
      <span class="bar"><span id="happyBar" class="bar-inner happy" style="width:100%"></span></span>
    </span>
    <span>ë°°ê³ í””
      <span class="bar"><span id="hungerBar" class="bar-inner hunger" style="width:100%"></span></span>
    </span>
    <span>ì—ë„ˆì§€
      <span class="bar"><span id="energyBar" class="bar-inner energy" style="width:100%"></span></span>
    </span>
  </div>
  <div id="gameover" style="display:none;">ê²Œì„ ì˜¤ë²„! ìƒˆë¡œê³ ì¹¨(F5)ìœ¼ë¡œ ì¬ì‹œì‘í•˜ì„¸ìš”.</div>
  <script>
    // ìƒíƒœ
    let sim = {
      name: "",
      x: 200, y: 120,
      size: 48,
      happy: 100,
      hunger: 100,
      energy: 100
    };
    let isGameStarted = false;
    let isGameOver = false;
    let moveSpeed = 12;
    const areaW = 480, areaH = 320;

    // ì˜¤ë¸Œì íŠ¸(ì¹¨ëŒ€, ì‹íƒ, TV) ì •ë³´
    const objects = [
      {type: 'bed', label: 'ì¹¨ëŒ€', emoji: 'ğŸ›ï¸', x: 30, y: 30, action: sleep},
      {type: 'table', label: 'ì‹íƒ', emoji: 'ğŸ½ï¸', x: 400, y: 40, action: eat},
      {type: 'tv', label: 'TV', emoji: 'ğŸ“º', x: 210, y: 220, action: play}
    ];

    // ìºë¦­í„° ìƒì„±
    function createSim() {
      const name = document.getElementById('simName').value.trim();
      if (!name) {
        alert('ìºë¦­í„° ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”!');
        return;
      }
      sim.name = name;
      document.getElementById('simLabel').innerText = `ğŸ‘¤ ${sim.name}`;
      document.getElementById('createPanel').style.display = 'none';
      document.getElementById('gameArea').style.display = 'block';
      document.getElementById('uiPanel').style.display = 'flex';
      drawSim();
      drawObjects();
      updateBars();
      isGameStarted = true;
    }

    // ìºë¦­í„° ê·¸ë¦¬ê¸°
    function drawSim() {
      let simEl = document.getElementById('simChar');
      if (!simEl) {
        simEl = document.createElement('div');
        simEl.id = 'simChar';
        simEl.className = 'sim';
        simEl.innerText = 'ğŸ˜Š';
        document.getElementById('gameArea').appendChild(simEl);
      }
      simEl.style.left = sim.x + 'px';
      simEl.style.top = sim.y + 'px';
    }

    // ì˜¤ë¸Œì íŠ¸ ê·¸ë¦¬ê¸°
    function drawObjects() {
      const area = document.getElementById('gameArea');
      objects.forEach((obj, idx) => {
        let objEl = document.getElementById('obj_' + obj.type);
        if (!objEl) {
          objEl = document.createElement('div');
          objEl.id = 'obj_' + obj.type;
          objEl.className = 'object';
          objEl.title = obj.label;
          objEl.innerText = obj.emoji;
          objEl.style.left = obj.x + 'px';
          objEl.style.top = obj.y + 'px';
          objEl.addEventListener('click', () => {
            if (isNear(obj)) obj.action();
          });
          area.appendChild(objEl);
        }
      });
    }

    // ì´ë™
    document.addEventListener('keydown', function(e) {
      if (!isGameStarted || isGameOver) return;
      let moved = false;
      if (e.key === 'ArrowUp') {
        if (sim.y - moveSpeed >= 0) { sim.y -= moveSpeed; moved = true;}
      }
      if (e.key === 'ArrowDown') {
        if (sim.y + moveSpeed <= areaH - sim.size) { sim.y += moveSpeed; moved = true;}
      }
      if (e.key === 'ArrowLeft') {
        if (sim.x - moveSpeed >= 0) { sim.x -= moveSpeed; moved = true;}
      }
      if (e.key === 'ArrowRight') {
        if (sim.x + moveSpeed <= areaW - sim.size) { sim.x += moveSpeed; moved = true;}
      }
      if (moved) {
        drawSim();
        objects.forEach(obj => {
          if (isNear(obj)) {
            // ì˜¤ë¸Œì íŠ¸ ê·¼ì²˜ ë„ì°©ì‹œ ì•ˆë‚´
            showHint(obj.label + ' [í´ë¦­]');
          }
        });
      }
    });

    // ì˜¤ë¸Œì íŠ¸ ê·¼ì²˜ì¸ì§€ íŒë‹¨
    function isNear(obj) {
      const dx = sim.x + sim.size/2 - (obj.x + 20);
      const dy = sim.y + sim.size/2 - (obj.y + 20);
      return Math.abs(dx) < 40 && Math.abs(dy) < 40;
    }

    // ìƒíƒœë°” ì—…ë°ì´íŠ¸
    function updateBars() {
      document.getElementById('happyBar').style.width = sim.happy + '%';
      document.getElementById('hungerBar').style.width = sim.hunger + '%';
      document.getElementById('energyBar').style.width = sim.energy + '%';
    }

    // íŒíŠ¸ í‘œì‹œ
    function showHint(msg) {
      let hint = document.getElementById('hint');
      if (!hint) {
        hint = document.createElement('div');
        hint.id = 'hint';
        hint.style.position = 'absolute';
        hint.style.bottom = '14px';
        hint.style.left = '50%';
        hint.style.transform = 'translateX(-50%)';
        hint.style.background = '#FFD600';
        hint.style.color = '#23232f';
        hint.style.padding = '6px 18px';
        hint.style.borderRadius = '10px';
        hint.style.fontWeight = 'bold';
        hint.style.fontSize = '1rem';
        hint.style.zIndex = '10';
        document.getElementById('gameArea').appendChild(hint);
      }
      hint.innerText = msg;
      hint.style.display = 'block';
      clearTimeout(hint.timer);
      hint.timer = setTimeout(() => { hint.style.display = 'none'; }, 1200);
    }

    // í–‰ë™ í•¨ìˆ˜ë“¤
    function eat() {
      if (isGameOver) return;
      sim.hunger = Math.min(sim.hunger + 30, 100);
      sim.energy = Math.max(sim.energy - 10, 0);
      sim.happy = Math.min(sim.happy + 5, 100);
      updateBars(); checkGameOver();
      showHint('ì‹ì‚¬ ì™„ë£Œ!');
    }
    function sleep() {
      if (isGameOver) return;
      sim.energy = Math.min(sim.energy + 35, 100);
      sim.hunger = Math.max(sim.hunger - 15, 0);
      sim.happy = Math.max(sim.happy - 5, 0);
      updateBars(); checkGameOver();
      showHint('ê¿€ì  ì™„ë£Œ!');
    }
    function play() {
      if (isGameOver) return;
      sim.happy = Math.min(sim.happy + 25, 100);
      sim.energy = Math.max(sim.energy - 20, 0);
      sim.hunger = Math.max(sim.hunger - 10, 0);
      updateBars(); checkGameOver();
      showHint('ì¦ê²ê²Œ ë†€ì•˜ì–´ìš”!');
    }

    // ìƒíƒœ ìì—° ê°ì†Œ
    setInterval(() => {
      if (!isGameStarted || isGameOver) return;
      sim.happy = Math.max(sim.happy - 1, 0);
      sim.hunger = Math.max(sim.hunger - 1, 0);
      sim.energy = Math.max(sim.energy - 1, 0);
      updateBars();
      checkGameOver();
    }, 2000);

    // ê²Œì„ ì˜¤ë²„ ì²˜ë¦¬
    function checkGameOver() {
      if (sim.happy <= 0 || sim.hunger <= 0 || sim.energy <= 0) {
        document.getElementById('gameover').style.display = 'block';
        isGameOver = true;
      }
    }
  </script>
</body>
</html>
